@import "./helpers";
@import "./vars";

// prettier-ignore
@mixin reset-margins {
	& > *:first-child { margin-top: 0; }
	& > *:last-child { margin-bottom: 0; }
}

.prose {
	@include reset-margins;

	-moz-tab-size: 2;
	-o-tab-size: 2;
	tab-size: 2;

	$base-font-size: 18;
	font: 400 rem($base-font-size) / 1.6 $sans;
	color: var(--gray-800);

	& > * {
		margin-bottom: rem($base-font-size);
	}

	h1 {
		$font-size: 28;
		margin-top: rem(32);
		margin-bottom: rem(16);
		font: 600 rem($font-size) / 1.4 $sans;
		color: var(--black);
	}
	h2 {
		$font-size: 24;
		margin-top: rem(32);
		margin-bottom: rem(8);
		font: 600 rem($font-size) / 1.4 $sans;
		color: var(--black);
	}
	h3,
	h4,
	h5,
	h6 {
		$font-size: $base-font-size;
		margin-top: rem(32);
		margin-bottom: rem(8);
		font: 600 rem($font-size) / 1.4 $sans;
		color: var(--black);
	}
	h1 > a,
	h2 > a,
	h3 > a,
	h4 > a,
	h5 > a,
	h6 > a {
		text-decoration: none;
		color: var(--black);
	}
	h1 > a:hover,
	h2 > a:hover,
	h3 > a:hover,
	h4 > a:hover,
	h5 > a:hover,
	h6 > a:hover {
		text-decoration: underline;
		color: var(--black);
	}
	hr {
		margin: rem(64) auto;
		max-width: rem(128);
		border-top-color: var(--gray-300);
	}

	// & > p:first-child {
	// 	// TODO
	// 	font: 400 rem(22) / 1.5 "DM Sans", $sans;
	// 	// letter-spacing: ${percent(-1.25)};
	// 	color: var(--gray-500);
	// }

	pre {
		@include no-macos-retina;
		padding: rem(8) rem(24);
		background-color: var(--gray-800);
		font: 400 rem(13) / 1.75 $mono;
		color: var(--gray-50);
		border-radius: rem(6);
	}
	pre [data-type="comm"] {
		color: var(--gray-300);
	}

	$list-offset: 24;

	ul {
		margin-left: rem($list-offset);
	}
	ul li {
		margin-top: rem(4);
		margin-bottom: rem(4);
	}
	ul li::before {
		margin-left: rem(-1 * $list-offset);
		position: absolute;
		content: "â€¢ ";
		color: var(--blue-500);
	}

	ol {
		margin-left: rem($list-offset);
	}
	ol li {
		margin-top: rem(4);
		margin-bottom: rem(4);
	}
	ol li:first-of-type {
		counter-reset: count;
	}
	ol li::before {
		margin-left: rem(-1 * $list-offset);
		position: absolute;
		content: counter(count) ". ";
		counter-increment: count;
		font-feature-settings: "tnum";
		color: var(--blue-500);
	}

	[data-emoji] {
		margin: 0 0.2ch;
		display: inline-block;
		transform: scale(1.2);
	}
	em {
		font-style: italic;
	}
	strong {
		font-weight: 600;
	}
	:not(pre) > code {
		@include no-macos-retina;
		padding: em(2) em(4);
		font-size: em(12.5);
		color: var(--blue-600);
		background-color: var(--white);
		border: rem(1) solid var(--gray-300);
		border-radius: em(4);
	}
	h1 code,
	h2 code,
	h3 code,
	h4 code,
	h5 code,
	h6 code {
		@include macos-retina;
	}
	a {
		text-decoration: underline;
		color: var(--gray-600);
	}
	small {
		font-size: em(12.5);
	}
}
